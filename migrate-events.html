<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Export Local Schedule Events</title>
  <style>
    body { font-family: -apple-system, sans-serif; max-width: 480px; margin: 80px auto; padding: 0 20px; color: #1e293b; }
    h2  { margin-bottom: 8px; }
    p   { color: #64748b; margin-bottom: 24px; line-height: 1.5; }
    .btn { display: inline-block; padding: 10px 20px; background: #3b82f6; color: white;
           border-radius: 7px; text-decoration: none; font-weight: 600; cursor: pointer;
           border: none; font-size: 1rem; }
    .btn:hover { background: #2563eb; }
    .none { background: #fef3c7; border: 1px solid #fde68a; border-radius: 7px; padding: 16px; color: #92400e; }
    ul { color: #475569; line-height: 2; }
  </style>
</head>
<body>
<h2>ðŸ“¦ Export Local Schedule Events</h2>

<script>
const raw = localStorage.getItem('kids-schedule-v1');
let events = [];
try { events = JSON.parse(raw || '[]'); } catch {}

if (!events.length) {
  document.write(`
    <div class="none">
      <strong>No events found in local storage.</strong><br>
      Make sure you're opening this file in the same browser you used to create the schedule.
    </div>
  `);
} else {
  document.write(`
    <p>Found <strong>${events.length} event(s)</strong> saved locally. Click below to download them, then import the file into the Azure-hosted schedule.</p>
    <button class="btn" onclick="download()">â¬‡ Download events-backup.json</button>
    <br><br>
    <p style="font-size:0.85rem;color:#94a3b8;">Events found:</p>
    <ul>
      ${events.map(e => `<li>${e.date} â€” ${e.title} (${e.child})</li>`).join('')}
    </ul>
  `);
}

function download() {
  const blob = new Blob([JSON.stringify(events, null, 2)], { type: 'application/json' });
  const a = Object.assign(document.createElement('a'), {
    href: URL.createObjectURL(blob),
    download: 'events-backup.json'
  });
  a.click();
}
</script>
</body>
</html>
